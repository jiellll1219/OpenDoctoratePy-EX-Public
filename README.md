# DoctoratePy-EX-Public

[简中](https://github.com/jiellll1219/OpenDoctoratePy-EX-Public/tree/main/README.md) | [EN](https://github.com/jiellll1219/OpenDoctoratePy-EX-Public/blob/main/docs/README_EN.md)

[更新日志（CN Only）](https://github.com/jiellll1219/OpenDoctoratePy-EX-Public/tree/main/docs/updata_log.md)

本项目旨在作为OpenDoctoratePy的分支，拓展与完善功能。短期目标为尽可能防止因404或未知错误被踹回登录界面，长期目标为实现类似SPT-AKI项目的单人游玩本地服务

此仓库部分功能实现的代码与数据结构参考了[LocalArknight](https://github.com/jiellll1219/LocalArknight)

开发仅为个人兴趣，鄙人技术有限，随缘更新，如有问题请提issue，但不保证可以第一时间修复bug（学生党只有假期期间和课余时间才有空~~堆屎山~~写代码）

这个仓库欢迎各位开发者提出pr，共同开发DoctoratePy是我创建这个仓库的初衷

如果需要联系我，请提出issue或向我的邮箱发送邮件：jiege0019@gmail.com

此项目无任何交流群，且我（仓库所有者）不支持任何倒卖行为，这并不利于项目的发展，如果我（仓库所有者）发现并认为倒卖行为已经泛滥到不可阻止的情况，将会归档此仓库

如果您希望为此仓库贡献代码，但苦于没有数据，可以在 [此处](https://dhjuisgf.ap-northeast-1.clawcloudrun.com/) 下载il2cpp文件，我会不定时上传每个版本的il2cpp文件

## 拓展进度

| 目标功能 | 进度 | 完成情况 | 备注 |
|:---:|:---:|:---:|:---:|
| 公开招募 | 暂停 | 神秘BUG |  |
| 定向寻访 | 完成 | 完成 | 已测试 |
| 基建 | 需要完善 | 需要完善 |  |
| 商店 | 完成 | 基本完成 | 无法购买 |
| 充值 | 完成 | 完成 |  |
| 界面方案 | 完成 | 完成 | 已测试 |
| 签到 | 完成 | 完成 | 已测试 |
| 签到活动 | 持续更新 | 基本完成 |  |
| 限时活动 | 持续更新 |  |  |
| 肉鸽 | 正在编写 | 仅限能玩 |  |
| 任务 | 正在编写 |  |  |
| 生息演算 | 暂停 |  |  |
| 好友助战 | 完成 | 完成 | 已测试 |

## 充值系统实现代码声明

# **本仓库的充值系统在正式支付环境中完全不可用，请不要尝试将此部分的代码移植到你的私有仓库中使用，我不会把这部分实现代码上传到公开仓库中，我并不希望该仓库被DMCA TakeDown**

## 使用教程

使用前阅读：  
请确保你使用的python版本大于等于3.11.0，低于3.11.0可能会出现python自带的模块缺失函数。  
下列步骤中如果使用 `steup_poetry.cmd` 配置环境，那么启动也需要使用 `start_server_poetry.cmd` 进行启动。pip配置方式的保留仅作为一个备用手段，并不推荐使用pip进行环境配置

1、自行寻找GameData或dump游戏资源以获取`excel`文件夹以及内容，并把`excel`文件夹放到 `data` 目录下  
2、运行 `steup_poetry.cmd` 或 `steup_pip.cmd` 配置环境  
3、运行 `start_server_poetry.cmd` 或 `start_local_server.cmd` 启动服务端  
4、自行寻找办法使游戏路由指向服务端，本仓库不提供解决办法

## Config参数说明

以下参数位于config.json的server字典中

### virtualtime

供开启旧卡池使用，值小于0时为返回实时时间

可能导致基建出现问题，确定后勿随意减小该值

兼容更多时间类型，可直接输入时间戳，亦可输入如“2024/02/02 12:12:12”、“2024-02-02 12:12:12”的时间格式。请注意，在输入此类时间时请使用英文双引号""，在日期与时间之间需要一个空格，请确保填写的时间完整且合理

### useMemoryCache

控制是否使用内存缓存功能，默认为false（关闭），启用（设定为true）此功能时，启动服务端后会占用至少0.4GB内存，同时会略微降低 `CPU使用率` 和 `accountSyncData函数耗时` 以及其它读取table类文件的函数的耗时。不启用此功能时，启动后内存占用为100MB左右，最大内存消耗在0.2GB左右，请酌情开启。

## GPLv3协议声明

本项目基于GNU通用公共许可证第三版（GPLv3）授权

此协议仅针对 **“分发”** 行为，并不对 **内部使用** 等其它行为有任何约束

根据GPLv3的规定，任何人在 **分发** 基于本仓库代码的程序（无论修改与否）时，**必须**提供完整的、对应的源代码。

除了GPLv3的条款外，作为持有人，**我们要求**任何使用此仓库的 **分发** 版本（无论是源代码还是编译后、打包后的形式）都必须显著地：

1.  **提供源仓库地址**：
    `https://github.com/jiellll1219/OpenDoctoratePy-EX-Public`

2.  **包含此版权声明和GPLv3许可证的完整文本**。

根据GPLv3第8条的规定，如果您在**分发**本作品时未能遵守本许可证的条款，您基于本许可证获得的**权利**将自动终止。但是，如果您停止所有违规行为，并在意识到违规或收到通知后的**30天内**予以纠正，您的权利将被自动恢复。

对于**故意侵犯**或**反复侵犯**许可证条款行为的实体，基于 GPLv3 获得的所有许可权利将被**永久终止**，且无自动恢复的可能。此决定由持有人自行裁定。

本声明是对 GPLv3 条款的解释与强调，并不取代其内容。请务必在行事前阅读并完全理解 [GPLv3 许可证全文](https://www.gnu.org/licenses/gpl-3.0.html)。