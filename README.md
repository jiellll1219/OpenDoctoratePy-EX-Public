# DoctoratePy-EX-Public

[简中](README.md) | [EN](docs/README_EN.md)  
[更新日志(UpdateLog)](docs/updata_log.md) [开发指南(DevelopmentGuide)](docs/DEVELOP.md)

# [王楚钦攻略组](https://space.bilibili.com/234823387)和[喀兰贸易-银老板](https://space.bilibili.com/14788654)两个傻逼给老子听好了！以后的更新全部转到自有gitea，那么喜欢“造福于民”就自己修服务端吧！既然那么喜欢打超时空合约，那以后的危机合约数据自己抓去吧
[来龙去脉](https://jiellll1219.pages.dev/post/1/)

<details>
<summary><strong>最近三条更新日志(点击展开)：</strong></summary>

- 2026 年 2 月 16 日
    修复：  
    1、极少数情况下，短时间内对某些路由发起海量请求会导致数据损坏的情况  
    2、在运行中间人软件时 **requests**模块 不信任证书的问题  

    更新：  
    1、商店购买系统重构，为大部分商品购买添加支持，中坚寻访凭证和少部分特殊角色购买尚未完成，会在后续更新修复  

    添加：  
    1、为其它 平台/渠道 的客户端提供支持  
    2、为默认路由添加支持

    修改：  
    1、config.prod 中请求 **config.json** 内容的函数改为从内存中获取  
    2、requirements.txt删除 py7zr，降低 AArch64 平台安装时的难度  
    3、删除 Giveitem 模块

    本次更新的内容已进行过测试，保证已有功能可正常使用

- 2026 年 2 月 10 日

    修复：  
    1、启动时出现 **AttributeError: 'function' object has no attribute 'getLogger'** 错误  
    2、肉鸽不期而遇处理函数（第363行）语法不正确的问题  
    3、部分设备在使用时会出现 **FileNotFoundError : [Errno 2] No such file or directory: 'data/crisisV2/cc?.json '** 的问题

    更新：  
    1、卡池文件  
    2、部分商店数据

- 2026 年 2 月 9 日

    修复：  
    1、卡池系统 `history` 函数category未赋值导致出错的问题  
    2、app.py 中 `/deviceprofile/v4` 路由methods拼写错的问题

    更新：  
    1、肉鸽 **不期而遇** 新的处理函数，目前仅支持 傀影与猩红孤钻（rogue_1） 和 水月与深蓝之树（rogue_2） 两个肉鸽。后续会调整数据编写计划，优先保证后续肉鸽 **不期而遇** 的基本可用，再逐步补完藏品、HP等其它数据  
    - 新处理函数用到的数据的编写格式在 [这里](./DEVELOP.md#event_choices.json格式说明) 查看，该数据需要人工维护，且维护难度较高，在理解 **每个参数** 的作用前，不建议修改它。该数据可能会随后续肉鸽更新添加其它 **参数**  
    2、优化 卡池系统 的代码样式

    添加：  
    1、增加 `load_data` 函数,用于加载自定义路径下的json文件到 **memory_cache**  
    2、添加 开发指南 文档便于理解一些复杂的内容

</details>

本项目旨在作为OpenDoctoratePy的分支，拓展与完善功能。短期目标为尽可能防止因404或未知错误被踹回登录界面，长期目标为实现类似SPT-AKI项目的单人游玩本地服务

此仓库部分功能实现的代码与数据结构参考了[LocalArknight](https://github.com/jiellll1219/LocalArknight)

开发仅为个人兴趣，鄙人技术有限，随缘更新，如有问题请提issue，但不保证可以第一时间修复bug（学生党只有假期期间和课余时间才有空~~堆屎山~~写代码）

这个仓库欢迎各位开发者提出pr，共同开发DoctoratePy是我创建这个仓库的初衷

如果需要联系我，请提出issue或向我的邮箱发送邮件：jiege0019@gmail.com

此项目无任何交流群，且我（仓库所有者）不支持任何倒卖行为，这并不利于项目的发展，如果我（仓库所有者）发现并认为倒卖行为已经泛滥到不可阻止的情况，将会归档此仓库

如果您希望为此仓库贡献代码，但苦于没有数据，可以在 [此处](https://dhjuisgf.ap-northeast-1.clawcloudrun.com/) 下载il2cpp文件，我会不定时上传每个版本的il2cpp文件

## 拓展进度

| 目标功能 | 进度 | 完成情况 | 备注 |
|:---:|:---:|:---:|:---:|
| 公开招募 | 暂停 | 神秘BUG |  |
| 定向寻访 | 完成 | 完成 | 已测试 |
| 基建 | 需要完善 | 需要完善 |  |
| 商店 | 完成 | 基本完成 | 无法购买 |
| 充值 | 完成 | 完成 |  |
| 界面方案 | 完成 | 完成 | 已测试 |
| 签到 | 完成 | 完成 | 已测试 |
| 签到活动 | 持续更新 | 基本完成 |  |
| 限时活动 | 持续更新 |  |  |
| 肉鸽 | 正在编写 | 仅限能玩 | 缓慢开发中 |
| 任务 | 正在编写 |  |  |
| 生息演算 | 暂停 |  |  |
| 好友助战 | 完成 | 完成 | 已测试 |

## 充值系统实现代码声明

# **本仓库的充值系统在正式支付环境中完全不可用，请不要尝试将此部分的代码移植到你的私有仓库中使用，我不会把这部分实现代码上传到公开仓库中，我并不希望该仓库被DMCA TakeDown**

## 使用教程

使用前阅读：  
请确保你使用的python版本大于等于3.11.0，低于3.11.0可能会出现python自带的模块缺失函数。  
下列步骤中如果使用 `steup_poetry.cmd` 配置环境，那么启动也需要使用 `start_server_poetry.cmd` 进行启动。pip配置方式的保留仅作为一个备用手段，并不推荐使用pip进行环境配置

1、自行寻找GameData或dump游戏资源以获取`excel`文件夹以及内容，并把`excel`文件夹放到 `data` 目录下  
2、运行 `steup_poetry.cmd` 或 `steup_pip.cmd` 配置环境  
3、运行 `start_server_poetry.cmd` 或 `start_local_server.cmd` 启动服务端  
4、自行寻找办法使游戏路由指向服务端，本仓库不提供解决办法

## Config参数说明

以下参数位于config.json的server字典中

### virtualtime

供开启旧卡池使用，值小于0时为返回实时时间

可能导致基建出现问题，确定后勿随意减小该值

兼容更多时间类型，可直接输入时间戳，亦可输入如“2024/02/02 12:12:12”、“2024-02-02 12:12:12”的时间格式。请注意，在输入此类时间时请使用英文双引号""，在日期与时间之间需要一个空格，请确保填写的时间完整且合理

### useMemoryCache

控制是否使用内存缓存功能，默认为false（关闭），启用（设定为true）此功能时，启动服务端后会占用至少0.4GB内存，同时会略微降低 `CPU使用率` 和 `accountSyncData函数耗时` 以及其它读取table类文件的函数的耗时。不启用此功能时，启动后内存占用为100MB左右，最大内存消耗在0.2GB左右，请酌情开启。

## GPLv3 协议声明

本项目依据 **GNU 通用公共许可证第三版（GPLv3）** 进行授权与发布。

本许可证仅适用于 **“分发”（Conveying）** 行为，对内部使用或其他非分发行为不施加限制。

### 一、分发者的法定义务
根据 GPLv3 的规定，任何个人或组织在 **分发** 本项目或其衍生作品（无论是否经过修改）时，必须履行以下义务：

1. **保留通知义务**
   - 分发者必须随作品保留本项目中已有的全部 **许可证声明及其他重要通知文件（包括 README.md 等）**。
   - 分发者不得移除或隐藏源代码中已有的许可证信息或官方声明内容。

2. **传染性要求**
    - GPLv3 是一种 **强传染性（强 Copyleft）许可证**。  
    - 基于本项目的 **任何修改版本、衍生作品或二次开发项目**，如果分发，也必须 **遵守 GPLv3 许可**。  
    - 分发者不得将衍生作品重新许可为专有或与 GPLv3 不兼容的许可证。

3. **源代码提供义务（GPLv3 第 6 条）**
   - 向公众提供目标程序（例如二进制文件）时，必须同时以不低于目标程序的便利性，向接收方免费提供对应的 **完整源代码（Complete Corresponding Source Code）**。
   - 若通过网络进行分发，分发者必须依 **GPLv3 第 6(d) 条** 的规定，确保完整源代码可通过公开且免费的网络服务器下载。以下为**GPLv3 第 6(d) 条**原文翻译版本

   > 通过在指定地点提供目标码获取服务（无论是否收费）的形式转发目标码时，在同一地点以同样的方式提供对等的源码获取服务，并不得额外收费。你不以要求接收者在复制目标码的同时复制源码。如果提供目标码复制的地点为网络服务器，相应的源码可以提供在另一个支持相同复制功能的服务器上（由你或者第三方运营），不过你要在目标码处指出相应源码的确切路径。不管你用什么源码服务器，你有义务要确保持续可用以满足这些要求。

---

### 二、许可证权利的终止与恢复（GPLv3 第 8 条）
根据 GPLv3 第 8 条：

- 如分发者未能遵守 GPLv3 的条款，其基于本许可证获得的权利将 **自动终止**。
- 若分发者停止全部违规行为，并于发现或收到通知后的 **30 天内** 完成纠正，其权利将 **自动恢复**。
- 对于 **故意** 或 **反复** 违反许可证条款的行为，相关权利将被永久终止，且不适用自动恢复机制。

### 三、说明
本声明旨在对 GPLv3 的关键义务进行明确陈述与强调，以便理解与遵守。  
本声明不替代、削弱或修改 GPLv3 的任何条款。如有冲突，应以 **GPLv3 许可证原文** 为准。

**请在分发前完整阅读并理解 GPLv3 许可证全文：**  
<https://www.gnu.org/licenses/gpl-3.0.html>

## 名人堂

### 1、天机阁

此条目编写于 2026年2月9日  
最后修改于 2026年2月

分发者已改正，公示信息移除
